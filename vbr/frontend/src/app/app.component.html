<!-- Loading Overlay -->
<div class="loading-overlay" *ngIf="isLoading">
  <app-loading message="Loading..." type="spinner" [overlay]="true"></app-loading>
</div>

<!-- Header -->
<app-header *ngIf="showHeader"></app-header>

<!-- Main Content -->
<main class="main-content" [class.no-header]="!showHeader" [class.no-footer]="!showFooter">
  <router-outlet></router-outlet>
</main>

<!-- Footer -->
<app-footer *ngIf="showFooter"></app-footer>


<!-- Global Notifications -->
 <div class="notification-container">
  <div class="notification-item" 
       *ngFor="let notification of (notificationService.notifications$ | async)?.slice(0, 3)"
       [class]="'notification-' + notification.type.toLowerCase()"
       [@slideIn]>
    <div class="notification-icon">
      <mat-icon>{{getNotificationIcon(notification.type)}}</mat-icon>
    </div>
    <div class="notification-content">
      <h4>{{notification.title}}</h4>
      <p>{{notification.message}}</p>
    </div>
    <button mat-icon-button
            *ngIf="notification.id !== undefined"
            (click)="dismissNotification(notification.id!)"
            class="notification-close">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</div>


<!-- PWA Update Available Banner -->
<div class="pwa-update-banner" *ngIf="showPwaPrompt">
  <div class="pwa-content">
    <mat-icon>system_update_alt</mat-icon>
    <div class="pwa-text">
      <h4>App Update Available</h4>
      <p>A new version is available. Update now for the best experience.</p>
    </div>
    <div class="pwa-actions">
      <button mat-button (click)="dismissPwaPrompt()">Later</button>
      <button mat-raised-button color="primary" (click)="updatePwa()">Update</button>
    </div>
  </div>
</div>

<!-- Connectivity Status -->
<div class="connectivity-banner" *ngIf="!isOnline">
  <mat-icon>cloud_off</mat-icon>
  <span>You're currently offline. Some features may not be available.</span>
</div>
